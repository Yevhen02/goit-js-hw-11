{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst url = 'https://pixabay.com/api/';\n\nconst searchParams = {\n  key: '42034785-c436f003c310c5b5229f24b7b',\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: 'true',\n  per_page: 27,\n};\n\nconst simpleGallery = new SimpleLightbox('.gallery a', {\n  overlayOpacity: 0.7,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst form = document.querySelector('.gallery-form');\nconst searchInput = document.querySelector('.search-input');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nform.addEventListener('submit', searchPhotos);\n\nfunction searchPhotos(event) {\n  event.preventDefault();\n  if (!searchInput.value.trim()) {\n    showErrorMessage('Please fill in the search field');\n    return;\n  }\n\n  const form = event.currentTarget;\n\n  fetchPhotos()\n    .then(photos => createGallery(photos))\n    .catch(error => showErrorMessage(`Something was wrong ${error}`))\n    .finally(() => {\n      form.reset();\n      simpleGallery.refresh();\n    });\n}\n\nfunction fetchPhotos() {\n  gallery.innerHTML = '';\n  loader.style.display = 'inline-block';\n  searchParams.q = searchInput.value.trim();\n\n  const searchParamsStringURL = new URLSearchParams(searchParams).toString();\n\n  return fetch(`${url}?${searchParamsStringURL}`).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n}\n\nfunction createGallery(photos) {\n  if (!photos.total) {\n    showErrorMessage(\n      'Sorry, there are no images matching your search query. Please, try again!'\n    );\n    loader.style.display = 'none';\n    return;\n  }\n  const markup = photos.hits\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n          <a href=\"${largeImageURL}\">\n            <img class=\"api-img\" src=\"${webformatURL}\" alt=\"${tags}\">\n            <div class=\"img-desc\">\n            <p class=\"para\">Likes: <span class=\"span\"> <br/>${likes}</span></p>\n            <p class=\"para\">Views: <span class=\"span\"> <br/>${views}</span></p>\n            <p class=\"para\">Comments: <span class=\"span\"> <br/>${comments}</span></p>\n            <p class=\"para\">Downloads: <span class=\"span\"> <br/>${downloads}</span></p>\n            </div>\n          </a>\n        </li>`;\n      }\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('afterbegin', markup);\n  loader.style.display = 'none';\n}\n\nfunction showErrorMessage(message) {\n  iziToast.show({\n    position: 'bottomCenter',\n    title: 'X',\n    titleColor: '#fff',\n    titleSize: '22px',\n    message,\n    backgroundColor: '#EF4040',\n    messageColor: '#FAFAFB',\n    messageSize: '16px',\n    close: false,\n    closeOnClick: true,\n    closeOnEscape: true,\n  });\n}\n"],"names":["url","searchParams","simpleGallery","SimpleLightbox","form","searchInput","gallery","loader","searchPhotos","event","showErrorMessage","fetchPhotos","photos","createGallery","error","searchParamsStringURL","response","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","message","iziToast"],"mappings":"6vBAKA,MAAMA,EAAM,2BAENC,EAAe,CACnB,IAAK,qCACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,EACZ,EAEMC,EAAgB,IAAIC,EAAe,aAAc,CACrD,eAAgB,GAChB,aAAc,MACd,aAAc,GAChB,CAAC,EAEKC,EAAO,SAAS,cAAc,eAAe,EAC7CC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAE/CH,EAAK,iBAAiB,SAAUI,CAAY,EAE5C,SAASA,EAAaC,EAAO,CAE3B,GADAA,EAAM,eAAc,EAChB,CAACJ,EAAY,MAAM,OAAQ,CAC7BK,EAAiB,iCAAiC,EAClD,MACD,CAED,MAAMN,EAAOK,EAAM,cAEnBE,EAAa,EACV,KAAKC,GAAUC,EAAcD,CAAM,CAAC,EACpC,MAAME,GAASJ,EAAiB,uBAAuBI,GAAO,CAAC,EAC/D,QAAQ,IAAM,CACbV,EAAK,MAAK,EACVF,EAAc,QAAO,CAC3B,CAAK,CACL,CAEA,SAASS,GAAc,CACrBL,EAAQ,UAAY,GACpBC,EAAO,MAAM,QAAU,eACvBN,EAAa,EAAII,EAAY,MAAM,KAAI,EAEvC,MAAMU,EAAwB,IAAI,gBAAgBd,CAAY,EAAE,SAAQ,EAExE,OAAO,MAAM,GAAGD,KAAOe,GAAuB,EAAE,KAAKC,GAAY,CAC/D,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACpB,CAAG,CACH,CAEA,SAASH,EAAcD,EAAQ,CAC7B,GAAI,CAACA,EAAO,MAAO,CACjBF,EACE,2EACN,EACIH,EAAO,MAAM,QAAU,OACvB,MACD,CACD,MAAMU,EAASL,EAAO,KACnB,IACC,CAAC,CACC,cAAAM,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA,qBACMN;AAAA,wCACmBC,WAAsBC;AAAA;AAAA,8DAEAC;AAAA,8DACAC;AAAA,iEACGC;AAAA,kEACCC;AAAA;AAAA;AAAA,cAK7D,EACA,KAAK,EAAE,EAEVlB,EAAQ,mBAAmB,aAAcW,CAAM,EAC/CV,EAAO,MAAM,QAAU,MACzB,CAEA,SAASG,EAAiBe,EAAS,CACjCC,EAAS,KAAK,CACZ,SAAU,eACV,MAAO,IACP,WAAY,OACZ,UAAW,OACX,QAAAD,EACA,gBAAiB,UACjB,aAAc,UACd,YAAa,OACb,MAAO,GACP,aAAc,GACd,cAAe,EACnB,CAAG,CACH"}